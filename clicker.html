<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>clicker</title>
<style>
  :root{
    --bg:#0c0c0c;
    --panel:#121212;
    --accent:#ff3040;
    --muted:#9a9a9a;
    --glass: rgba(255,255,255,0.03);
  }
  html,body{height:100%;margin:0;font-family:"Courier New",monospace;background:var(--bg);color:#fff}
  .wrap{min-height:100%;display:grid;place-items:center;padding:20px}
  .card{
    width:min(820px,96vw);
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border:2px solid var(--accent);
    border-radius:8px;
    padding:16px;
    display:grid;
    grid-template-columns: 1fr 320px;
    gap:16px;
    box-sizing:border-box;
  }
  .left{display:flex;flex-direction:column;align-items:center;gap:12px;padding:8px}
  .big-button{
    width:min(420px,72vw);
    height:min(240px,42vh);
    background:linear-gradient(180deg,#1b1b1b,#0e0e0e);
    border:3px solid var(--accent);
    border-radius:12px;
    display:grid;
    place-items:center;
    font-size: clamp(28px, 6vw, 56px);
    cursor:pointer;
    user-select:none;
    transition:transform .08s ease, box-shadow .12s;
    box-shadow:0 6px 24px rgba(255,48,64,0.08);
  }
  .big-button:active{transform:scale(.99);box-shadow:0 3px 12px rgba(0,0,0,0.6)}
  .score-row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
  .score-card{
    background:var(--glass);
    padding:10px 12px;
    border:1px solid rgba(255,255,255,0.04);
    border-radius:6px;
    min-width:120px;
    text-align:center;
  }
  .score-value{font-weight:bold;font-size:1.6em;color:var(--accent)}
  .right{display:flex;flex-direction:column;gap:8px}
  .panel{background:#0d0d0d;padding:10px;border-radius:6px;border:1px solid rgba(255,255,255,0.03)}
  .title{color:var(--accent);font-weight:bold;margin-bottom:6px}
  .shop-list{display:flex;flex-direction:column;gap:8px}
  .shop-item{display:flex;justify-content:space-between;align-items:center;padding:8px;border-radius:6px;background:rgba(255,255,255,0.01);border:1px solid rgba(255,255,255,0.02)}
  .shop-item button{background:var(--accent);color:#08080f;border:none;padding:8px 10px;border-radius:6px;font-weight:bold;cursor:pointer}
  .muted{color:var(--muted);font-size:0.9em}
  .controls{display:flex;gap:8px;margin-top:8px;flex-wrap:wrap}
  .btn{background:transparent;color:var(--accent);border:2px solid var(--accent);padding:6px 10px;border-radius:6px;cursor:pointer}
  .small{font-size:0.9em;padding:6px 8px}
  footer{margin-top:8px;color:var(--muted);font-size:0.85em;text-align:center}
  @media (max-width:840px){.card{grid-template-columns:1fr;}.right{order:-1}}
</style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="application" aria-label="Clicker game">
      <div class="left">
        <div class="score-row" style="width:100%;justify-content:center">
          <div class="score-card">
            <div class="muted">Score</div>
            <div id="score" class="score-value">0</div>
          </div>
          <div class="score-card">
            <div class="muted">Per Click</div>
            <div id="perClick" class="score-value">1</div>
          </div>
          <div class="score-card">
            <div class="muted">CPS</div>
            <div id="cps" class="score-value">0</div>
          </div>
        </div>

        <div id="clickBtn" class="big-button" role="button" tabindex="0" aria-pressed="false" aria-label="Click to earn points">
          <div id="bigText">CLICK</div>
        </div>

        <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;justify-content:center;width:100%">
          <button id="resetBtn" class="btn small">Reset</button>
          <a class="btn small" href="index.html">Back</a>
          <div class="muted" style="margin-left:8px">Shortcuts: Space=Click · A=Buy Auto · M=Buy Mult</div>
        </div>

        <footer>57Alpha Clicker — autosaves every 3s</footer>
      </div>

      <div class="right">
        <div class="panel">
          <div class="title">Upgrades</div>
          <div class="shop-list" id="shop">
            <!-- items injected by JS -->
          </div>
        </div>

        <div class="panel">
          <div class="title">Stats & Actions</div>
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div class="muted">Total Clicks</div>
            <div id="totalClicks">0</div>
          </div>
          <div style="height:8px"></div>
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div class="muted">Auto-Clickers</div>
            <div id="autoCount">0</div>
          </div>

          <div class="controls">
            <button id="buyAuto" class="btn small">Buy Auto (A)</button>
            <button id="buyMult" class="btn small">Buy Mult (M)</button>
          </div>
        </div>

        <div class="panel">
          <div class="title">Help</div>
          <div class="muted">Click the big button to earn points. Buy Auto-Clickers to gain passive CPS. Buy Multipliers to improve per-click value. Costs scale with purchases. Press Esc to return.</div>
        </div>
      </div>
    </div>
  </div>

<script>
  // Simple clicker implementation with persistence
  const KEY = 'alpha_clicker_v1';
  const defaultState = {
    score: 0,
    perClick: 1,
    autoCount: 0,
    totalClicks: 0,
    bought: { auto:0, mult:0 }
  };

  let state = loadState();

  // Shop definitions
  const SHOP = {
    auto: { baseCost: 25, cps: 1 },
    mult: { baseCost: 50, multiplier: 1.5 }
  };

  // DOM
  const scoreEl = document.getElementById('score');
  const perClickEl = document.getElementById('perClick');
  const cpsEl = document.getElementById('cps');
  const totalClicksEl = document.getElementById('totalClicks');
  const autoCountEl = document.getElementById('autoCount');
  const clickBtn = document.getElementById('clickBtn');
  const shopEl = document.getElementById('shop');
  const buyAutoBtn = document.getElementById('buyAuto');
  const buyMultBtn = document.getElementById('buyMult');
  const resetBtn = document.getElementById('resetBtn');

  // Helpers
  function format(n){ return Math.floor(n); }
  function costFor(item){
    const times = state.bought[item] || 0;
    const base = SHOP[item].baseCost;
    return Math.max(1, Math.round(base * Math.pow(1.6, times)));
  }

  function updateUI(){
    scoreEl.textContent = format(state.score);
    perClickEl.textContent = (state.perClick % 1 === 0) ? state.perClick : state.perClick.toFixed(2);
    cpsEl.textContent = (state.autoCount * SHOP.auto.cps).toFixed(2);
    totalClicksEl.textContent = state.totalClicks;
    autoCountEl.textContent = state.autoCount;
    renderShop();
  }

  function renderShop(){
    shopEl.innerHTML = '';
    // Auto item
    const autoCost = costFor('auto');
    const multCost = costFor('mult');
    const autoItem = makeShopItem('Auto-Clicker', `Adds ${SHOP.auto.cps} CPS`, autoCost, 'auto');
    const multItem = makeShopItem('Multiplier', `x${SHOP.mult.multiplier.toFixed(2)} per purchase`, multCost, 'mult');
    shopEl.appendChild(autoItem);
    shopEl.appendChild(multItem);
  }

  function makeShopItem(title, desc, cost, key){
    const wrap = document.createElement('div');
    wrap.className = 'shop-item';
    const left = document.createElement('div');
    left.innerHTML = `<div style="font-weight:bold">${title}</div><div class="muted" style="font-size:0.9em">${desc}</div>`;
    const right = document.createElement('div');
    right.style.display = 'flex';
    right.style.gap = '8px';
    right.style.alignItems='center';
    const costEl = document.createElement('div');
    costEl.className = 'muted';
    costEl.textContent = cost;
    const btn = document.createElement('button');
    btn.textContent = state.score >= cost ? 'Buy' : 'Insufficient';
    btn.disabled = state.score < cost;
    btn.addEventListener('click', () => buy(key));
    right.appendChild(costEl);
    right.appendChild(btn);
    wrap.appendChild(left);
    wrap.appendChild(right);
    return wrap;
  }

  // Actions
  function clickAction(){
    state.score += state.perClick;
    state.totalClicks += 1;
    popClickAnim();
    saveStateDebounced();
    updateUI();
  }

  function buy(item){
    const c = costFor(item);
    if (state.score < c) return;
    state.score -= c;
    state.bought[item] = (state.bought[item] || 0) + 1;
    if (item === 'auto') {
      state.autoCount += 1;
    } else if (item === 'mult') {
      // multiply perClick
      state.perClick = +(state.perClick * SHOP.mult.multiplier).toFixed(4);
    }
    saveStateDebounced();
    updateUI();
  }

  function resetState(){
    if (!confirm('Reset all progress?')) return;
    state = JSON.parse(JSON.stringify(defaultState));
    saveState();
    updateUI();
  }

  // Auto-click loop
  let lastTick = performance.now();
  function tick(now){
    const dt = now - lastTick;
    lastTick = now;
    const cps = state.autoCount * SHOP.auto.cps;
    if (cps > 0) {
      // accumulate fractional clicks based on dt
      const clicks = (cps * dt) / 1000;
      state.score += clicks * state.perClick;
    }
    // update UI frequently but not every frame
    requestAnimationFrame(tick);
  }

  // Small click pop animation
  function popClickAnim(){
    clickBtn.animate([
      { transform: 'scale(1)' },
      { transform: 'scale(0.98)' },
      { transform: 'scale(1)' }
    ], { duration: 120, easing: 'ease-out' });
  }

  // Persistence
  function saveState(){
    try { localStorage.setItem(KEY, JSON.stringify(state)); } catch(e){}
  }
  let saveTimer = null;
  function saveStateDebounced(){
    if (saveTimer) clearTimeout(saveTimer);
    saveTimer = setTimeout(saveState, 600);
  }
  function loadState(){
    try {
      const raw = localStorage.getItem(KEY);
      if (raw) {
        const parsed = JSON.parse(raw);
        return Object.assign({}, defaultState, parsed);
      }
    } catch(e){}
    return Object.assign({}, defaultState);
  }

  // UI wiring
  clickBtn.addEventListener('click', clickAction);
  clickBtn.addEventListener('keydown', (e)=>{ if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); clickAction(); }});
  buyAutoBtn.addEventListener('click', ()=>buy('auto'));
  buyMultBtn.addEventListener('click', ()=>buy('mult'));
  resetBtn.addEventListener('click', resetState);

  // Keyboard shortcuts
  document.addEventListener('keydown', (e)=>{
    if (e.key === ' ') { e.preventDefault(); clickAction(); }
    else if (e.key.toLowerCase() === 'a') { buy('auto'); }
    else if (e.key.toLowerCase() === 'm') { buy('mult'); }
    else if (e.key === 'Escape') { window.location.href = 'index.html'; }
  });

  // Autosave interval
  setInterval(()=>saveState(), 3000);

  // Initialize UI and start loops
  updateUI();
  lastTick = performance.now();
  requestAnimationFrame(tick);
</script>
</body>
</html>
